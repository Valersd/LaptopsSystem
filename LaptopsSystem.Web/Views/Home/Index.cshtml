@model IList<LaptopIndex>

@{
    ViewBag.Title = "Laptops";
    int reminder = Model.Count % 3;
    int last = Model.Count - reminder;
    
    var uri = new Uri(Request.Url.AbsoluteUri);
    var cleanUrl = uri.GetComponents(UriComponents.AbsoluteUri & ~UriComponents.Port, UriFormat.UriEscaped);
    TempData["Url"] = cleanUrl;
}

<h2>Laptops System</h2>
<hr />

@for (int i = 0; i < last; i += 3)
{
    <div class="row">
        @for (int j = i; j < i + 3; j++)
        {
            <div class="col-sm-4">
                @Html.DisplayFor(m => Model[j])
            </div>
        }
    </div>
    <br />
}

@if (reminder > 0)
{
    <div class="row">
        @for (int i = last; i < Model.Count; i++)
        {
            <div class="col-sm-4">
                @Html.DisplayFor(m => Model[i])
            </div>
        }
    </div>
}
